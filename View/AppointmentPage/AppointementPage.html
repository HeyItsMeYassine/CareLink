<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Book Appointment - CareLink</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
      background: linear-gradient(135deg, #f0fdfa 0%, #cffafe 100%);
      min-height: 100vh;
    }

    header {
      background: white;
      border-bottom: 1px solid #e5e7eb;
      box-shadow: 0 1px 3px rgba(0,0,0,0.1);
    }

    .header-content {
      max-width: 1280px;
      margin: 0 auto;
      padding: 1rem 2rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .logo {
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .logo-icon {
      width: 40px;
      height: 40px;
      background: #0d9488;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.5rem;
    }

    .logo-text {
      font-size: 1.25rem;
      font-weight: 600;
      color: #0d9488;
    }

    .back-btn {
      padding: 0.5rem 1rem;
      background: transparent;
      border: 1px solid #e5e7eb;
      border-radius: 0.375rem;
      cursor: pointer;
      font-size: 0.875rem;
      transition: background 0.2s;
    }

    .back-btn:hover {
      background: #f3f4f6;
    }

    main {
      max-width: 900px;
      margin: 0 auto;
      padding: 3rem 1.5rem;
    }

    .page-header {
      margin-bottom: 2rem;
    }

    .page-title {
      font-size: 1.875rem;
      font-weight: bold;
      color: #111827;
      margin-bottom: 0.5rem;
    }

    .page-description {
      color: #6b7280;
    }

    .progress-bar {
      margin-bottom: 2rem;
    }

    .progress-steps {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 0.5rem;
    }

    .progress-step {
      display: flex;
      align-items: center;
      flex: 1;
    }

    .step-circle {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 600;
      transition: all 0.3s;
    }

    .step-circle.active {
      background: #0d9488;
      color: white;
    }

    .step-circle.inactive {
      background: #e5e7eb;
      color: #9ca3af;
    }

    .step-line {
      height: 4px;
      flex: 1;
      margin: 0 0.5rem;
      transition: background 0.3s;
    }

    .step-line.active {
      background: #0d9488;
    }

    .step-line.inactive {
      background: #e5e7eb;
    }

    .progress-labels {
      display: flex;
      justify-content: space-between;
      font-size: 0.875rem;
      color: #6b7280;
    }

    .card {
      background: white;
      border-radius: 0.5rem;
      box-shadow: 0 1px 3px rgba(0,0,0,0.1);
      overflow: hidden;
    }

    .card-header {
      padding: 1.5rem;
      border-bottom: 1px solid #e5e7eb;
    }

    .card-title {
      font-size: 1.5rem;
      font-weight: 600;
      color: #111827;
      margin-bottom: 0.25rem;
    }

    .card-description {
      color: #6b7280;
      font-size: 0.875rem;
    }

    .card-content {
      padding: 1.5rem;
    }

    .form-group {
      margin-bottom: 1.5rem;
    }

    label {
      display: block;
      font-weight: 500;
      margin-bottom: 0.5rem;
      color: #374151;
    }

    select {
      width: 100%;
      padding: 0.625rem 0.75rem;
      border: 1px solid #d1d5db;
      border-radius: 0.375rem;
      font-size: 0.875rem;
      background: white;
      cursor: pointer;
      transition: border-color 0.2s;
    }

    select:focus {
      outline: none;
      border-color: #0d9488;
      box-shadow: 0 0 0 3px rgba(13, 148, 136, 0.1);
    }

    select:disabled {
      background: #f9fafb;
      cursor: not-allowed;
    }

    .doctor-card {
      padding: 1rem;
      border: 2px solid #e5e7eb;
      border-radius: 0.5rem;
      margin-bottom: 1rem;
      cursor: pointer;
      transition: all 0.2s;
    }

    .doctor-card:hover {
      border-color: #5eead4;
    }

    .doctor-card.selected {
      border-color: #0d9488;
      background: #f0fdfa;
    }

    .doctor-card-header {
      display: flex;
      justify-content: space-between;
      align-items: start;
    }

    .doctor-info h3 {
      font-size: 1.125rem;
      font-weight: 600;
      color: #111827;
      margin-bottom: 0.25rem;
    }

    .doctor-specialty {
      color: #0d9488;
      font-weight: 500;
      margin-bottom: 0.25rem;
    }

    .doctor-phone {
      color: #6b7280;
      font-size: 0.875rem;
    }

    .radio-circle {
      width: 24px;
      height: 24px;
      border: 2px solid #d1d5db;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.2s;
    }

    .doctor-card.selected .radio-circle {
      border-color: #0d9488;
      background: #0d9488;
    }

    .radio-check {
      width: 16px;
      height: 16px;
      color: white;
      display: none;
    }

    .doctor-card.selected .radio-check {
      display: block;
    }

    .calendar-container {
      display: flex;
      justify-content: center;
      margin-bottom: 1.5rem;
    }

    .calendar {
      border: 1px solid #e5e7eb;
      border-radius: 0.5rem;
      padding: 1rem;
      background: white;
    }

    .calendar-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 1rem;
      font-weight: 600;
    }

    .calendar-nav {
      background: transparent;
      border: none;
      padding: 0.5rem;
      cursor: pointer;
      font-size: 1.25rem;
      color: #0d9488;
    }

    .calendar-grid {
      display: grid;
      grid-template-columns: repeat(7, 1fr);
      gap: 0.25rem;
    }

    .calendar-day-label {
      text-align: center;
      font-size: 0.75rem;
      font-weight: 600;
      color: #6b7280;
      padding: 0.5rem;
    }

    .calendar-day {
      text-align: center;
      padding: 0.625rem;
      border-radius: 0.375rem;
      cursor: pointer;
      transition: all 0.2s;
      font-size: 0.875rem;
    }

    .calendar-day:hover:not(.disabled):not(.empty) {
      background: #f0fdfa;
    }

    .calendar-day.selected {
      background: #0d9488;
      color: white;
    }

    .calendar-day.disabled {
      color: #d1d5db;
      cursor: not-allowed;
    }

    .calendar-day.empty {
      cursor: default;
    }

    .time-slots {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 0.5rem;
      margin-top: 1rem;
    }

    .time-slot {
      padding: 0.625rem;
      border: 1px solid #d1d5db;
      border-radius: 0.375rem;
      text-align: center;
      cursor: pointer;
      transition: all 0.2s;
      font-size: 0.875rem;
      background: white;
    }

    .time-slot:hover {
      border-color: #0d9488;
    }

    .time-slot.selected {
      background: #0d9488;
      color: white;
      border-color: #0d9488;
    }

    .confirmation-box {
      background: #f9fafb;
      border-radius: 0.5rem;
      padding: 1.5rem;
      margin-bottom: 1.5rem;
    }

    .confirmation-box h3 {
      font-size: 1.125rem;
      font-weight: 600;
      padding-bottom: 0.5rem;
      border-bottom: 1px solid #e5e7eb;
      margin-bottom: 1rem;
    }

    .confirmation-item {
      margin-bottom: 1rem;
    }

    .confirmation-label {
      font-size: 0.875rem;
      color: #6b7280;
      margin-bottom: 0.25rem;
    }

    .confirmation-value {
      font-weight: 600;
      color: #111827;
    }

    .specialty-value {
      color: #0d9488;
    }

    .button-group {
      display: flex;
      justify-content: space-between;
      gap: 1rem;
      margin-top: 1.5rem;
    }

    button {
      padding: 0.625rem 1.5rem;
      border-radius: 0.375rem;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.2s;
      font-size: 0.875rem;
    }

    .btn-primary {
      background: #0d9488;
      color: white;
      border: none;
    }

    .btn-primary:hover:not(:disabled) {
      background: #0f766e;
    }

    .btn-primary:disabled {
      background: #d1d5db;
      cursor: not-allowed;
    }

    .btn-secondary {
      background: white;
      color: #374151;
      border: 1px solid #d1d5db;
    }

    .btn-secondary:hover {
      background: #f3f4f6;
    }

    .hidden {
      display: none;
    }
  </style>
</head>
<body>
  <header>
    <div class="header-content">
      <div class="logo">
        <div class="logo-icon">‚ù§Ô∏è</div>
        <span class="logo-text">CareLink</span>
      </div>
      <button class="back-btn" onclick="window.history.back()">Back to Dashboard</button>
    </div>
  </header>

  <main>
    <div class="page-header">
      <h1 class="page-title">Book New Appointment</h1>
      <p class="page-description">Follow the steps to schedule your medical appointment</p>
    </div>

    <div class="progress-bar">
      <div class="progress-steps">
        <div class="progress-step">
          <div class="step-circle active" id="step-1-circle">1</div>
          <div class="step-line inactive" id="line-1"></div>
        </div>
        <div class="progress-step">
          <div class="step-circle inactive" id="step-2-circle">2</div>
          <div class="step-line inactive" id="line-2"></div>
        </div>
        <div class="progress-step">
          <div class="step-circle inactive" id="step-3-circle">3</div>
          <div class="step-line inactive" id="line-3"></div>
        </div>
        <div class="progress-step">
          <div class="step-circle inactive" id="step-4-circle">4</div>
        </div>
      </div>
      <div class="progress-labels">
        <span>Location</span>
        <span>Doctor</span>
        <span>Date & Time</span>
        <span>Confirm</span>
      </div>
    </div>

    <div class="card">
      <div class="card-header">
        <h2 class="card-title" id="card-title">Select Location</h2>
        <p class="card-description" id="card-description">First select your wilaya, then choose your city</p>
      </div>
      <div class="card-content">
        <!-- Step 1: Location Selection -->
        <div id="step-1">
          <div class="form-group">
            <label for="wilaya-select">Wilaya</label>
            <select id="wilaya-select" onchange="handleWilayaChange()">
              <option value="">Select a wilaya</option>
            </select>
          </div>
          <div class="form-group hidden" id="city-group">
            <label for="city-select">City</label>
            <select id="city-select" onchange="handleCityChange()">
              <option value="">Select a city</option>
            </select>
          </div>
          <div class="button-group">
            <div></div>
            <button class="btn-primary" id="next-1" onclick="goToStep(2)" disabled>Next</button>
          </div>
        </div>

        <!-- Step 2: Doctor Selection -->
        <div id="step-2" class="hidden">
          <div id="doctors-list"></div>
          <div class="button-group">
            <button class="btn-secondary" onclick="goToStep(1)">Back</button>
            <button class="btn-primary" id="next-2" onclick="goToStep(3)" disabled>Next</button>
          </div>
        </div>

        <!-- Step 3: Date & Time Selection -->
        <div id="step-3" class="hidden">
          <div class="form-group">
            <label>Select Date</label>
            <div class="calendar-container">
              <div class="calendar" id="calendar"></div>
            </div>
          </div>
          <div class="form-group hidden" id="time-group">
            <label>Select Time</label>
            <div class="time-slots" id="time-slots"></div>
          </div>
          <div class="button-group">
            <button class="btn-secondary" onclick="goToStep(2)">Back</button>
            <button class="btn-primary" id="next-3" onclick="goToStep(4)" disabled>Next</button>
          </div>
        </div>

        <!-- Step 4: Confirmation -->
        <div id="step-4" class="hidden">
          <div class="confirmation-box" id="confirmation-details"></div>
          <div class="button-group">
            <button class="btn-secondary" onclick="goToStep(3)">Back</button>
            <button class="btn-primary" onclick="confirmAppointment()">Confirm Appointment</button>
          </div>
        </div>
      </div>
    </div>
  </main>

  <script>
    // Doctor data
    const doctorsData = [
      {"ID":"ID001","First_Name":"Farid","Last_Name":"Zoubir","Wilaya":"Alger","City":"Alger Centre","Email":"zoubirfarid@gmail.com","Password":"VqRzE749","Phone Number":"05 51 02 48 37","Sexe":"M","Speciality":"Neurologist","Location_Link":"https://maps.app.goo.gl/Alger-Rou√Øba-Sarah"},
      {"ID":"ID002","First_Name":"Lila","Last_Name":"Meghraoui","Wilaya":"Alger","City":"Bab El Oued","Email":"meghraouilila@gmail.com","Password":"AsXyP910","Phone Number":"07 92 55 11 04","Sexe":"F","Speciality":"Gastroenterology","Location_Link":"https://www.google.com/url?sa=E&source=gmail&q=https://maps.app.goo.gl/Oran-Arzew-Sofiane"},
      {"ID":"ID003","First_Name":"Malik","Last_Name":"Haddad","Wilaya":"Alger","City":"Hussein Dey","Email":"haddadmalik@gmail.com","Password":"GtJkL283","Phone Number":"06 44 88 23 59","Sexe":"M","Speciality":"Ophthalmologist","Location_Link":"https://www.google.com/url?sa=E&source=gmail&q=https://maps.app.goo.gl/Oran-EsSenia-Amel"},
      {"ID":"ID004","First_Name":"Amira","Last_Name":"Chouiter","Wilaya":"Alger","City":"Bir Mourad Ra√Øs","Email":"chouiteramira@gmail.com","Password":"DnQbV601","Phone Number":"05 20 73 94 18","Sexe":"F","Speciality":"Cardiology","Location_Link":"https://www.google.com/url?sa=E&source=gmail&q=https://maps.app.goo.gl/Alger-Cheraga-Salim"},
      {"ID":"ID005","First_Name":"Khaled","Last_Name":"Belkacem","Wilaya":"Alger","City":"El Harrach","Email":"belkacemkhaled@gmail.com","Password":"BwSfC332","Phone Number":"07 70 61 52 93","Sexe":"M","Speciality":"Dentist","Location_Link":"https://www.google.com/url?sa=E&source=gmail&q=https://maps.app.goo.gl/Alger-DarElBeida-Faiza"},
      {"ID":"ID006","First_Name":"Samia","Last_Name":"Kerrouche","Wilaya":"Alger","City":"Baraki","Email":"kerrouchesamia@gmail.com","Password":"MjTkG847","Phone Number":"06 93 40 17 65","Sexe":"F","Speciality":"General Practitioner","Location_Link":"https://www.google.com/url?sa=E&source=gmail&q=https://maps.app.goo.gl/Boumerdes-Dellys-Yacine"},
      {"ID":"ID007","First_Name":"Rami","Last_Name":"Abdelaziz","Wilaya":"Alger","City":"Oued Smar","Email":"abdelazizrami@gmail.com","Password":"FzLcO516","Phone Number":"05 55 28 91 70","Sexe":"M","Speciality":"Pediatrician","Location_Link":"https://www.google.com/url?sa=E&source=gmail&q=https://maps.app.goo.gl/Boumerdes-BordjMenai-Meriem"},
      {"ID":"ID008","First_Name":"Nawal","Last_Name":"Bendali","Wilaya":"Alger","City":"Birkhadem","Email":"bendarinawal@gmail.com","Password":"HxVyR098","Phone Number":"07 81 35 69 22","Sexe":"F","Speciality":"Gynecologist","Location_Link":"https://www.google.com/url?sa=E&source=gmail&q=https://maps.app.goo.gl/Tlemcen-Tlemcen-Nabil"},
      {"ID":"ID009","First_Name":"Yassine","Last_Name":"Ghezali","Wilaya":"Alger","City":"Dar El Be√Øda","Email":"ghezaliyassine@gmail.com","Password":"PlQxW463","Phone Number":"06 18 77 03 45","Sexe":"M","Speciality":"Orthopedist","Location_Link":"https://www.google.com/url?sa=E&source=gmail&q=https://maps.app.goo.gl/Tlemcen-Chetouane-Chahinez"},
      {"ID":"ID010","First_Name":"Warda","Last_Name":"Hamdi","Wilaya":"Alger","City":"Rouiba","Email":"hamdiwarda@gmail.com","Password":"TkNlM125","Phone Number":"05 94 62 80 71","Sexe":"F","Speciality":"Dermatologist","Location_Link":"https://www.google.com/url?sa=E&source=gmail&q=https://maps.app.goo.gl/Alger-Birkhadem-Samira"},
      {"ID":"ID011","First_Name":"Mounir","Last_Name":"Taleb","Wilaya":"Alger","City":"Regha√Øa","Email":"taleb mounir@gmail.com","Password":"SpBzJ734","Phone Number":"07 77 19 43 06","Sexe":"M","Speciality":"Neurologist","Location_Link":"https://www.google.com/url?sa=E&source=gmail&q=https://maps.app.goo.gl/Oran-BirElDjir-Kamel"},
      {"ID":"ID012","First_Name":"Sonia","Last_Name":"Lounis","Wilaya":"Alger","City":"A√Øn Taya","Email":"lounissonia@gmail.com","Password":"QjCxH957","Phone Number":"06 32 50 88 14","Sexe":"F","Speciality":"Gastroenterology","Location_Link":"https://www.google.com/search?q=https://maps.app.goo.gl/Alger-Rouiba-Sarah"},
      {"ID":"ID013","First_Name":"Karim","Last_Name":"Ziani","Wilaya":"Alger","City":"Kouba","Email":"zianikarim@gmail.com","Password":"LvTrK628","Phone Number":"05 60 97 12 33","Sexe":"M","Speciality":"Ophthalmologist","Location_Link":"https://www.google.com/url?sa=E&source=gmail&q=https://maps.app.goo.gl/Oran-Oran-Hakim"},
      {"ID":"ID014","First_Name":"Fella","Last_Name":"Harrat","Wilaya":"Alger","City":"Mohammadia","Email":"harratfella@gmail.com","Password":"CwYtD882","Phone Number":"07 90 26 47 51","Sexe":"F","Speciality":"Cardiology","Location_Link":"https://www.google.com/url?sa=E&source=gmail&q=https://maps.app.goo.gl/Boumerdes-Boumerdes-Lina"},
      {"ID":"ID015","First_Name":"Hocine","Last_Name":"Mekki","Wilaya":"Alger","City":"Bordj El Kiffan","Email":"mekkihocine@gmail.com","Password":"RmPuN396","Phone Number":"06 11 49 70 85","Sexe":"M","Speciality":"Dentist","Location_Link":"https://www.google.com/url?sa=E&source=gmail&q=https://maps.app.goo.gl/Tlemcen-Hennaya-Mourad"},
      {"ID":"ID016","First_Name":"Leila","Last_Name":"Mansour","Wilaya":"Alger","City":"Draria","Email":"mansourleila@gmail.com","Password":"AfGeS147","Phone Number":"05 88 33 09 20","Sexe":"F","Speciality":"General Practitioner","Location_Link":"https://www.google.com/url?sa=E&source=gmail&q=https://maps.app.goo.gl/Alger-Zeralda-Rima"},
      {"ID":"ID047","First_Name":"Ali","Last_Name":"Koufi","Wilaya":"Oran","City":"Oran","Email":"koufiali@gmail.com","Password":"HxOwY437","Phone Number":"07 71 82 45 60","Sexe":"M","Speciality":"Pediatrician","Location_Link":"https://maps.app.goo.gl/Tlemcen-Tlemcen-Nabil1"},
      {"ID":"ID048","First_Name":"Linda","Last_Name":"Sami","Wilaya":"Oran","City":"Es S√©nia","Email":"samilinda@gmail.com","Password":"IyPvX759","Phone Number":"06 15 28 01 34","Sexe":"F","Speciality":"Gynecologist","Location_Link":"https://maps.app.goo.gl/Tlemcen-Tlemcen-Nabil2"},
      {"ID":"ID049","First_Name":"Kamel","Last_Name":"Touati","Wilaya":"Oran","City":"Bir El Djir","Email":"touatikamel@gmail.com","Password":"JzQuW080","Phone Number":"05 52 39 74 91","Sexe":"M","Speciality":"Orthopedist","Location_Link":"https://maps.app.goo.gl/Tlemcen-Tlemcen-Nabil3"},
      {"ID":"ID050","First_Name":"Nadia","Last_Name":"Bounif","Wilaya":"Oran","City":"Arzew","Email":"bounifnadia@gmail.com","Password":"KxRyV302","Phone Number":"07 99 64 12 55","Sexe":"F","Speciality":"Dermatologist","Location_Link":"https://maps.app.goo.gl/Tlemcen-Tlemcen-Nabil4"},
      {"ID":"ID059","First_Name":"Mustapha","Last_Name":"Dridi","Wilaya":"Boumerd√®s","City":"Boumerd√®s","Email":"dridimustapha@gmail.com","Password":"TzVxM197","Phone Number":"07 76 68 04 31","Sexe":"M","Speciality":"Orthopedist","Location_Link":"https://maps.app.goo.gl/Tlemcen-Chetouane-Chahinez3"},
      {"ID":"ID060","First_Name":"Wafa","Last_Name":"Koucha","Wilaya":"Boumerd√®s","City":"Thenia","Email":"kouchawafa@gmail.com","Password":"UzWyL519","Phone Number":"06 35 13 47 62","Sexe":"F","Speciality":"Dermatologist","Location_Link":"https://maps.app.goo.gl/Tlemcen-Chetouane-Chahinez4"},
      {"ID":"ID061","First_Name":"Said","Last_Name":"Messaoudi","Wilaya":"Boumerd√®s","City":"Dellys","Email":"messaoudisaid@gmail.com","Password":"VxXzK840","Phone Number":"05 58 20 79 95","Sexe":"M","Speciality":"Neurologist","Location_Link":"https://maps.app.goo.gl/Tlemcen-Chetouane-Chahinez5"}
    ];

    // State
    let currentStep = 1;
    let selectedWilaya = '';
    let selectedCity = '';
    let selectedDoctor = null;
    let selectedDate = null;
    let selectedTime = '';
    let currentMonth = new Date().getMonth();
    let currentYear = new Date().getFullYear();

    // Time slots
    const timeSlots = ['08:00','08:30','09:00','09:30','10:00','10:30','11:00','11:30','14:00','14:30','15:00','15:30','16:00','16:30','17:00','17:30'];

    // Initialize
    function init() {
      populateWilayas();
      generateTimeSlots();
      renderCalendar();
    }

    function populateWilayas() {
      const wilayaSelect = document.getElementById('wilaya-select');
      const wilayas = [...new Set(doctorsData.map(d => d.Wilaya))].sort();
      wilayas.forEach(wilaya => {
        const option = document.createElement('option');
        option.value = wilaya;
        option.textContent = wilaya;
        wilayaSelect.appendChild(option);
      });
    }

    function handleWilayaChange() {
      const wilayaSelect = document.getElementById('wilaya-select');
      selectedWilaya = wilayaSelect.value;
      selectedCity = '';
      
      const cityGroup = document.getElementById('city-group');
      const citySelect = document.getElementById('city-select');
      
      if (selectedWilaya) {
        cityGroup.classList.remove('hidden');
        citySelect.innerHTML = '<option value="">Select a city</option>';
        
        const cities = [...new Set(
          doctorsData.filter(d => d.Wilaya === selectedWilaya).map(d => d.City)
        )].sort();
        
        cities.forEach(city => {
          const option = document.createElement('option');
          option.value = city;
          option.textContent = city;
          citySelect.appendChild(option);
        });
      } else {
        cityGroup.classList.add('hidden');
      }
      
      document.getElementById('next-1').disabled = !selectedWilaya || !selectedCity;
    }

    function handleCityChange() {
      const citySelect = document.getElementById('city-select');
      selectedCity = citySelect.value;
      document.getElementById('next-1').disabled = !selectedCity;
    }

    function goToStep(step) {
      // Hide all steps
      for (let i = 1; i <= 4; i++) {
        document.getElementById(`step-${i}`).classList.add('hidden');
      }
      
      // Show current step
      document.getElementById(`step-${step}`).classList.remove('hidden');
      currentStep = step;
      
      // Update progress bar
      updateProgressBar(step);
      
      // Update card header
      const titles = ['Select Location', 'Choose Doctor', 'Pick Date & Time', 'Confirm Appointment'];
      const descriptions = [
        'First select your wilaya, then choose your city',
        'Select a doctor based on your location',
        'Choose your preferred date and time',
        'Review and confirm your appointment details'
      ];
      document.getElementById('card-title').textContent = titles[step - 1];
      document.getElementById('card-description').textContent = descriptions[step - 1];
      
      // Load step content
      if (step === 2) {
        loadDoctors();
      } else if (step === 4) {
        showConfirmation();
      }
    }

    function updateProgressBar(step) {
      for (let i = 1; i <= 4; i++) {
        const circle = document.getElementById(`step-${i}-circle`);
        if (i <= step) {
          circle.classList.remove('inactive');
          circle.classList.add('active');
        } else {
          circle.classList.remove('active');
          circle.classList.add('inactive');
        }
        
        if (i < 4) {
          const line = document.getElementById(`line-${i}`);
          if (i < step) {
            line.classList.remove('inactive');
            line.classList.add('active');
          } else {
            line.classList.remove('active');
            line.classList.add('inactive');
          }
        }
      }
    }

    function loadDoctors() {
      const doctorsList = document.getElementById('doctors-list');
      doctorsList.innerHTML = '';
      
      const doctors = doctorsData.filter(d => d.Wilaya === selectedWilaya && d.City === selectedCity);
      
      doctors.forEach(doctor => {
        const card = document.createElement('div');
        card.className = 'doctor-card';
        if (selectedDoctor && selectedDoctor.ID === doctor.ID) {
          card.classList.add('selected');
        }
        
        card.innerHTML = `
          <div class="doctor-card-header">
            <div class="doctor-info">
              <h3>Dr. ${doctor.First_Name} ${doctor.Last_Name}</h3>
              <p class="doctor-specialty">${doctor.Speciality}</p>
              <p class="doctor-phone">üìû ${doctor['Phone Number']}</p>
            </div>
            <div class="radio-circle">
              <svg class="radio-check" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/>
              </svg>
            </div>
          </div>
        `;
        
        card.onclick = () => selectDoctor(doctor);
        doctorsList.appendChild(card);
      });
    }

    function selectDoctor(doctor) {
      selectedDoctor = doctor;
      loadDoctors();
      document.getElementById('next-2').disabled = false;
    }

    function renderCalendar() {
      const calendar = document.getElementById('calendar');
      const monthNames = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];
      
      const firstDay = new Date(currentYear, currentMonth, 1).getDay();
      const daysInMonth = new Date(currentYear, currentMonth + 1, 0).getDate();
      const today = new Date();
      today.setHours(0, 0, 0, 0);
      
      let html = `
        <div class="calendar-header">
          <button class="calendar-nav" onclick="changeMonth(-1)">‚Üê</button>
          <span>${monthNames[currentMonth]} ${currentYear}</span>
          <button class="calendar-nav" onclick="changeMonth(1)">‚Üí</button>
        </div>
        <div class="calendar-grid">
          <div class="calendar-day-label">Sun</div>
          <div class="calendar-day-label">Mon</div>
          <div class="calendar-day-label">Tue</div>
          <div class="calendar-day-label">Wed</div>
          <div class="calendar-day-label">Thu</div>
          <div class="calendar-day-label">Fri</div>
          <div class="calendar-day-label">Sat</div>
      `;
      
      // Empty cells for days before month starts
      for (let i = 0; i < firstDay; i++) {
        html += '<div class="calendar-day empty"></div>';
      }
      
      // Days of month
      for (let day = 1; day <= daysInMonth; day++) {
        const date = new Date(currentYear, currentMonth, day);
        const dayOfWeek = date.getDay();
        const isPast = date < today;
        const isWeekend = dayOfWeek === 5 || dayOfWeek === 6; // Friday or Saturday
        const isDisabled = isPast || isWeekend;
        const isSelected = selectedDate && 
          selectedDate.getDate() === day && 
          selectedDate.getMonth() === currentMonth && 
          selectedDate.getFullYear() === currentYear;
        
        let className = 'calendar-day';
        if (isDisabled) className += ' disabled';
        if (isSelected) className += ' selected';
        
        html += `<div class="${className}" onclick="selectDate(${day}, ${isDisabled})">${day}</div>`;
      }
      
      html += '</div>';
      calendar.innerHTML = html;
    }

    function changeMonth(delta) {
      currentMonth += delta;
      if (currentMonth > 11) {
        currentMonth = 0;
        currentYear++;
      } else if (currentMonth < 0) {
        currentMonth = 11;
        currentYear--;
      }
      renderCalendar();
    }

    function selectDate(day, isDisabled) {
      if (isDisabled) return;
      
      selectedDate = new Date(currentYear, currentMonth, day);
      renderCalendar();
      
      document.getElementById('time-group').classList.remove('hidden');
      updateNextButton3();
    }

    function generateTimeSlots() {
      const timeSlotsContainer = document.getElementById('time-slots');
      timeSlots.forEach(time => {
        const slot = document.createElement('button');
        slot.className = 'time-slot';
        slot.textContent = time;
        slot.onclick = () => selectTime(time);
        timeSlotsContainer.appendChild(slot);
      });
    }

    function selectTime(time) {
      selectedTime = time;
      document.querySelectorAll('.time-slot').forEach(slot => {
        if (slot.textContent === time) {
          slot.classList.add('selected');
        } else {
          slot.classList.remove('selected');
        }
      });
      updateNextButton3();
    }

    function updateNextButton3() {
      document.getElementById('next-3').disabled = !selectedDate || !selectedTime;
    }

    function showConfirmation() {
      const confirmation = document.getElementById('confirmation-details');
      const dateStr = selectedDate.toLocaleDateString('en-US', {
        weekday: 'long',
        year: 'numeric',
        month: 'long',
        day: 'numeric'
      });
      
      confirmation.innerHTML = `
        <h3>Appointment Details</h3>
        <div class="confirmation-item">
          <p class="confirmation-label">Doctor</p>
          <p class="confirmation-value">Dr. ${selectedDoctor.First_Name} ${selectedDoctor.Last_Name}</p>
          <p class="specialty-value">${selectedDoctor.Speciality}</p>
        </div>
        <div class="confirmation-item">
          <p class="confirmation-label">Location</p>
          <p class="confirmation-value">${selectedCity}, ${selectedWilaya}</p>
        </div>
        <div class="confirmation-item">
          <p class="confirmation-label">Date</p>
          <p class="confirmation-value">${dateStr}</p>
        </div>
        <div class="confirmation-item">
          <p class="confirmation-label">Time</p>
          <p class="confirmation-value">${selectedTime}</p>
        </div>
        <div class="confirmation-item">
          <p class="confirmation-label">Contact</p>
          <p class="confirmation-value">${selectedDoctor['Phone Number']}</p>
        </div>
      `;
    }

    function confirmAppointment() {
      alert('Appointment confirmed!');
      window.location.href = 'index.html';
    }

    // Initialize on load
    init();
  </script>
</body>
</html>
